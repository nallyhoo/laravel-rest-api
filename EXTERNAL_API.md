# Integrating External APIs in Laravel

This guide explains how to connect your Project Inventory system to third-party services (e.g., Currency Converters, Barcode Lookups, or Shipping APIs).

---

## ðŸš€ 1. Using the Laravel HTTP Client
Laravel provides a beautiful wrapper around Guzzle called the `Http` facade.

### Synchronous GET Request
```php
use Illuminate\Support\Facades\Http;

$response = Http::get('https://api.example.com/data');

if ($response->successful()) {
    $data = $response->json();
}
```

---

## ðŸ” 2. Managing API Keys (Security)
**Never** put API keys directly in your code.

1.  **Add to `.env`**:
    ```env
    EXTERNAL_SERVICE_KEY=your_actual_key_here
    ```

2.  **Add to `config/services.php`**:
    ```php
    'external_service' => [
        'key' => env('EXTERNAL_SERVICE_KEY'),
    ],
    ```

3.  **Access in Code**:
    ```php
    $key = config('services.external_service.key');
    ```

---

## ðŸ—ï¸ 3. Recommended Architecture: The Service Pattern
Instead of putting API logic in your Controller, create a "Service" class.

**File: `app/Services/CurrencyService.php`**
```php
namespace App\Services;

use Illuminate\Support\Facades\Http;

class CurrencyService {
    public function convertPrice($amount, $toCurrency) {
        $response = Http::timeout(5)
            ->get("https://api.exchangerate.host/convert", [
                'from' => 'USD',
                'to' => $toCurrency,
                'amount' => $amount
            ]);

        return $response->successful() ? $response->json('result') : $amount;
    }
}
```

---

## ðŸ› ï¸ 4. Handling Failures
External APIs can be slow or offline. Protect your app with these methods:

*   **Timeouts**: `Http::timeout(3)->get(...)` (Don't let your app wait forever).
*   **Retries**: `Http::retry(3, 100)->get(...)` (Retry 3 times with 100ms break).
*   **Error Throwing**: `Http::get(...)->throw();` (Throws an exception if the API fails).

---

## ðŸ§ª 5. Testing with Fakes
One of the best features of Laravel is the ability to "fake" an API during testing so you don't waste your API credits.

```php
Http::fake([
    'api.example.com/*' => Http::response(['status' => 'success'], 200),
]);

// This call won't actually hit the internet
$response = Http::get('https://api.example.com/users');
```

---
The Two Ways to Integrate External APIs
Backend Integration (Laravel Http - Recommended):
Pros: You can hide your API keys, cache the results, and handle errors before the data reaches the user.
Best for: Currency exchange rates, Payment gateways, or Private databases.
Tool: Laravel's Http::get() or Http::post() (explained in the guide).
Frontend Integration (JavaScript Axios):
Pros: Extremely fast for public data; reduces load on your server.
Best for: Public maps, Weather widgets, or Gravatar images.
Tool: Standard axios.get('https://api.external.com/data') in your 
app.js
.
*Generated by Antigravity AI Assistant*
